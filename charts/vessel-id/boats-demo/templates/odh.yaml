apiVersion: kfdef.apps.kubeflow.org/v1
kind: KfDef
metadata:
  name: {{ .Values.odh.kfdef.name }}
  namespace: {{ .Chart.Name }}
spec:
  applications:
{{- range .Values.odh.applications }}
    - kustomizeConfig:
        repoRef:
          name: {{ .repoRef.name }}
          path: {{ .repoRef.path }}
{{- if eq .name "jupyterhub" }}
        parameters:
          - name: {{ .params.name }}
            value: {{ .params.value }}
{{- end }}
{{- if eq .name "notebook-images" }}
        overlays:
          - additional
{{- end }}
      name: {{ .name }}
{{- end -}}
{{- range .Values.odh.repos }}
  repos:
    - name: {{ .name }}
      uri: {{ .uri }}
{{- end -}}
